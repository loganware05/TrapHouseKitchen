# Environment Variables for Render Deployment

## üîß Backend Service (`traphousekitchen-api`)

Copy these into Render Dashboard ‚Üí Environment Variables:

```bash
# Database
DATABASE_URL=postgresql://user:password@host:5432/dbname?sslmode=require
# ‚ö†Ô∏è Get this from Render PostgreSQL database dashboard

# JWT
JWT_SECRET=<auto-generated by Render> ‚úÖ
JWT_EXPIRES_IN=7d ‚úÖ

# Frontend URL (update after frontend deploys!)
FRONTEND_URL=https://traphousekitchen-web.onrender.com
# ‚ö†Ô∏è Replace with your actual frontend URL after deployment

# Stripe (Production Keys)
STRIPE_SECRET_KEY=sk_live_xxxxxxxxxxxxx
STRIPE_PUBLISHABLE_KEY=pk_live_xxxxxxxxxxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxx
# ‚ö†Ô∏è Get from Stripe Dashboard ‚Üí Settings ‚Üí API keys

# Email (Resend)
RESEND_API_KEY=re_xxxxxxxxxxxxx
FROM_EMAIL=TrapHouse Kitchen <orders@traphousekitchen.com> ‚úÖ
CHEF_EMAIL=chef@traphousekitchen.com
# ‚ö†Ô∏è Update CHEF_EMAIL to your actual chef email

# Environment
NODE_ENV=production ‚úÖ
PORT=10000 ‚úÖ
```

## üé® Frontend Static Site (`traphousekitchen-web`)

Copy these into Render Dashboard ‚Üí Environment Variables:

```bash
# Backend API URL
VITE_API_URL=https://traphousekitchen-api.onrender.com/api
# ‚ö†Ô∏è Replace with your actual backend URL

# Stripe Publishable Key (same as backend)
VITE_STRIPE_PUBLISHABLE_KEY=pk_live_xxxxxxxxxxxxx
```

---

## üìù Quick Setup Guide

### 1. Backend Environment Variables

**Required:**
- `DATABASE_URL` - From Render PostgreSQL dashboard
- `FRONTEND_URL` - Set after frontend deploys
- `STRIPE_SECRET_KEY` - From Stripe Dashboard
- `STRIPE_PUBLISHABLE_KEY` - From Stripe Dashboard
- `STRIPE_WEBHOOK_SECRET` - From Stripe Webhook settings
- `RESEND_API_KEY` - From Resend Dashboard
- `CHEF_EMAIL` - Your chef's email address

**Auto-Generated:**
- `JWT_SECRET` - Render will generate this ‚úÖ

**Pre-Set:**
- `NODE_ENV=production` ‚úÖ
- `PORT=10000` ‚úÖ
- `JWT_EXPIRES_IN=7d` ‚úÖ
- `FROM_EMAIL` ‚úÖ

### 2. Frontend Environment Variables

**Required:**
- `VITE_API_URL` - Your backend URL + `/api`
- `VITE_STRIPE_PUBLISHABLE_KEY` - Same as backend publishable key

---

## ‚ö†Ô∏è Important Notes

1. **Order Matters:** Deploy backend first, then frontend
2. **Update FRONTEND_URL:** After frontend deploys, update backend `FRONTEND_URL`
3. **Stripe Keys:** Use production keys (`sk_live_` and `pk_live_`)
4. **Webhook Secret:** Get this AFTER creating webhook endpoint in Stripe
5. **Database URL:** Must include `?sslmode=require` for Render

---

## üîç How to Get Each Value

### DATABASE_URL
1. Render Dashboard ‚Üí PostgreSQL ‚Üí Your Database
2. Click "Connect" or "Info"
3. Copy "Internal Database URL" or "External Database URL"
4. Format: `postgresql://user:password@host:5432/dbname?sslmode=require`

### Stripe Keys
1. Stripe Dashboard ‚Üí Settings ‚Üí API keys
2. Toggle to "Live mode"
3. Copy "Secret key" (`sk_live_...`)
4. Copy "Publishable key" (`pk_live_...`)

### Stripe Webhook Secret
1. Deploy backend first
2. Stripe Dashboard ‚Üí Developers ‚Üí Webhooks
3. Add endpoint: `https://your-backend-url.onrender.com/api/webhooks/stripe`
4. Select events: `payment_intent.succeeded`, `payment_intent.payment_failed`
5. Copy "Signing secret" (`whsec_...`)

### RESEND_API_KEY
1. Resend Dashboard ‚Üí API Keys
2. Create new API key
3. Copy the key (`re_...`)

### FRONTEND_URL & VITE_API_URL
1. After deploying, get URLs from Render Dashboard
2. Backend URL: `https://traphousekitchen-api.onrender.com`
3. Frontend URL: `https://traphousekitchen-web.onrender.com`
4. Set `FRONTEND_URL` = frontend URL
5. Set `VITE_API_URL` = backend URL + `/api`

---

## ‚úÖ Verification Checklist

After setting all variables:

- [ ] All backend variables set
- [ ] All frontend variables set
- [ ] `FRONTEND_URL` matches actual frontend URL
- [ ] `VITE_API_URL` matches backend URL + `/api`
- [ ] Stripe keys are production keys (not test)
- [ ] Database URL includes SSL mode
- [ ] Webhook secret matches Stripe webhook

---

**Save this file for reference during deployment! üìã**
